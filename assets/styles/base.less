:root {
  --app-height: 100vh;
  --flair-color: #2761fd;
  --flair-color-secondary: #286cfe;
  --satellite-color: #2761fd;
  --flair-color-secondary: #286cfe;
}

* {
  border-color: @flair-color;
}

html,
body {
  position: fixed;
  overflow: hidden;
  height: @full;
  &:extend(.full-width);
  overscroll-behavior: contain;
  caret-color: @flair-color !important;
}

html {
  &:extend(.background-gradient);
}

body {
  padding: env(safe-area-inset-top) env(safe-area-inset-right)
    env(safe-area-inset-bottom) env(safe-area-inset-left) !important;
  font-variant-ligatures: none;
}

.is-secondary-background {
  background: @darker;
}

#app {
  &:extend(.font-primary);
}

// ------------- Ui Elements-------------

//Cards
.card {
  background: black;
  .card-text {
    .price {
      .btn-buy {
        &:extend(.background-flair-gradient);
        &:extend(.glow-flair);
      }
    }
  }
}

.glyph-card {
  .glyph-card-header {
    &:extend(.background-flair);
  }
  .card-text {
    .price {
      .btn-buy {
        &:extend(.background-flair-gradient);
        &:extend(.glow-flair);
      }
    }
  }
}

//Toast
.toasted-container.top-center {
  top: env(safe-area-inset-top) !important;
}

.toasted-container .toasted {
  &:extend(.background-flair);
  color: @secondary-text !important;
  font-family: @primary-font;
}
.loading-bar {
  .bar {
    background: @text;
  }
}

//Menus
.is-collapsed .menu-toggle {
  &:extend(.font-flair);
}

.context-menu {
  p {
    &:hover {
      &:extend(.background-flair);
    }
  }
}

.menu-list {
  a {
    &:extend(.font-primary);

    &.is-active {
      &:extend(.background-flair-gradient);
      &:extend(.glow-flair);
    }

    &:hover:not(.is-active) {
      &:extend(.background-semitransparent-light);
      &:extend(.font-primary);
    }
  }

  li {
    &.is-active {
      &:extend(.background-flair-gradient);
      &:extend(.glow-flair);
    }

    a.is-active {
      &:extend(.background-flair-gradient);
      &:extend(.glow-flair);
    }

    &:hover:not(.is-active) {
      &:extend(.background-semitransparent-light);
    }
  }
}

.menu-label {
  &:extend(.font-muted);
}

.simple-menu {
  .active {
    &:extend(.background-flair);

    &:hover {
      &:extend(.background-flair);
    }
  }
}

.version {
  &:extend(.font-muted);
}

//Breadcrumb
.breadcrumb {
  a {
    &:extend(.font-flair);
    &:hover {
      &:extend(.font-flair);
    }
  }
}

// Buttons
.button {
  &.is-primary {
    &:extend(.background-flair-gradient);
    &:extend(.glow-flair);

    &[disabled] {
      &:extend(.background-flair);
    }

    &:hover {
      &:extend(.background-flair-gradient);
    }
  }

  &.is-primary.is-outlined {
    &:extend(.font-flair);
  }

  #custom-cursor-area {
    &:extend(.font-primary);
  }

  &.is-danger,
  .is-danger {
    &:extend(.glow-danger);
    &:extend(.background-danger-gradient);

    &:hover {
      &:extend(.glow-danger);
      &:extend(.background-danger-gradient);
    }
  }

  &.is-danger.is-outlined {
    &:extend(.color-danger);
    &:extend(.glow-danger);

    &:hover,
    &:focus {
      &:extend(.background-danger-gradient);
      &:extend(.glow-danger);
    }
  }
}

.button-group {
  .button {
    &.active {
      &:extend(.background-flair);
      &:extend(.glow-flair);
      &:extend(.font-primary);
    }
    &:hover {
      border: none;
    }
  }
}

button {
  outline: none !important;
  border: none !important;
}

.button.is-dark.is-outlined {
  &:extend(.font-primary);
  border-color: @foreground;

  &:hover,
  &:focus:not(.active) {
    background: @foreground;
    border-color: @foreground;
    &:extend(.font-secondary);
  }

  &.active {
    &:extend(.background-flair);
    border-color: @foreground;
    &:extend(.font-secondary);
  }
}

.button.is-dark {
  &:extend(.background-semitransparent-lighter);
  &:extend(.font-secondary);

  &:hover:not(.active) {
    background: @foreground-alt;
    &:extend(.font-secondary);
  }
}

.tabs {
  overflow: unset !important;
}

//Selects
.select select {
  background: @midground;
  &:extend(.font-primary);
}
.select.is-primary select {
  &:extend(.background-flair-gradient);
  border: none;
  outline: none;
  &:extend(.glow-flair);
  &::after,
  &::before {
    border-color: @secondary-text;
  }
}

.select.is-primary:not(:hover)::after,
.select:not(.is-multiple):not(.is-loading):hover::after {
  border-color: @secondary-text;
  &:extend(.first-layer);
}

.select.is-primary:hover::after,
.select.is-primary:active::after,
.select.is-primary selec:hover {
  border-color: @secondary-text;
}

.is-primary {
  .custom-select {
    &:extend(.font-primary);
    .selected {
      &:extend(.background-flair-gradient);
      &:extend(.glow-flair);

      &:hover {
        &:extend(.glow-flair-secondary);
      }
    }
  }
}

/* Only for Safari to fix selection text background */

@media not all and (min-resolution: 0.001dpcm) {
  @supports (-webkit-appearance: none) {
    ::selection {
      background: rgba(var(--flair-color), 0.99) !important;
    }
  }
}

//Multiselect & chip items
.multiselect {
  .multiselect__input {
    &:extend(.font-primary);
    &:extend(.background-flair);
  }

  .multiselect__content-wrapper {
    &:extend(.border-flair-small);
    &:extend(.glow-flair);
  }

  .multiselect__tags {
    &:extend(.background-flair);
    &:extend(.border-flair-small);
  }
}

.vc-is-dark {
  .vc-weekday {
    &:extend(.font-flair);
  }
  .vc-highlight {
    &:extend(.background-flair-gradient);
    &:extend(.glow-flair);
  }
}

//Chip
.chip-item {
  &:extend(.background-flair);
  &:extend(.border-flair-small);
}

//Volume Slider
.volume-slider {
  .vue-slider-process {
    &:extend(.background-flair);
  }
  .vue-slider-dot-tooltip {
    .vue-slider-dot-tooltip-inner {
      &:extend(.background-flair);
      &::after {
        border-top-color: @flair-color !important;
      }
    }
  }
}

// Progress
progress.progress {
  border: @flair-color;

  &.is-primary {
    border-color: @flair-color !important;
    &::-webkit-progress-value {
      &:extend(.background-flair);
    }
  }

  &:extend(.border-flair-small);
}

//Switch
.switch-container {
  .switch-button-control {
    .switch-button {
      border: 0.125rem solid @flair-color;
      box-shadow: inset 0px 0px 2px 0px rgba(0, 0, 0, 0.33);

      .sw-button {
        &:extend(.background-flair);
        &:extend(.switch-off-glow-flair);
      }

      &.enabled {
        &:extend(.background-flair);
        &:extend(.glow-flair);

        .sw-button {
          border: 0.2rem solid @flair-color;
          background: @white !important;
        }
      }
    }
  }
}

//Toggle sidebar
.toggle-sidebar,
.toggle--sidebar,
.menu-toggle {
  &:extend(.font-flair);
}

//Sidebar
#sidebar {
  .sidebar-nav {
    .button,
    div {
      &.is-primary {
        &:extend(.background-flair-gradient);
        &:extend(.glow-flair);
      }
      .tag-inverted {
        background: @midground !important;
      }
    }
  }

  .label {
    &:extend(.background-flair);
  }
  background: @background !important;
}

.side-bar-inner {
  .body {
    .category-tree {
      .category-item {
        &.active,
        :hover {
          &:extend(.font-flair);
        }
      }
    }
  }
}

// Swiper
.sidebar-container.swiper-slide.swiper-slide-active {
  transform: none;
}

//Scrollbar
#app {
  .ps__thumb-x,
  .ps__thumb-y,
  .ps__rail-x:hover > .ps__thumb-x,
  .ps__rail-x:focus > .ps__thumb-x,
  .ps__rail-x.ps--clicking .ps__thumb-x,
  .ps__rail-y:hover > .ps__thumb-y,
  .ps__rail-y:focus > .ps__thumb-y,
  .ps__rail-y.ps--clicking .ps__thumb-y {
    &:extend(.background-flair);
  }
}

.auto-scroll {
  &::-webkit-scrollbar-thumb {
    &:extend(.background-flair);
  }

  scrollbar-color: @flair-color transparent;
}

.hidden-scroll {
  overflow-y: auto;
  position: relative;

  -ms-overflow-style: none;
  scrollbar-width: none;
  &::-webkit-scrollbar {
    display: none;
    scrollbar-width: none;
  }
}

//Media
#media-heading {
  .tag {
    &:extend(.background-flair);
    &:extend(.glow-flair);
  }
}

#mediastream {
  .user,
  .tag {
    &:extend(.background-flair);
  }
  .tag {
    &:extend(.background-flair);
  }
}

.user {
  .tag {
    &:extend(.background-flair);
  }
}

.media-user {
  &:extend(.background-flair);
}

.more-user {
  &:extend(.background-flair);
}

//Video
video {
  &:extend(.glow-flair);
}

.plyr__control--overlaid {
  &:extend(.glow-flair);
  &:extend(.background-flair);
}

.plyr--full-ui input[type='range'] {
  &:extend(.font-flair);
}

//Tag
.tag {
  &:extend(.background-flair-gradient);
  &:extend(.glow-flair);
  &:extend(.font-secondary);
  .tag-number {
    &:extend(.background-flair);
  }

  &:not(body).is-dark {
    .tag-number {
      &:extend(.background-flair);
    }
    background: @background;
  }
  &:not(body).is-primary {
    &:extend(.background-flair);
  }
}

.tag-inverted {
  &:extend(.font-secondary);
  background: @foreground;
}

// Chatbar
#chatbar {
  .chatbar-controls {
    div[data-tooltip='Send'] {
      &:extend(.font-flair);
    }
    .send-message-btn {
      &:extend(.font-flair);
    }
  }
  .chatbar-wrap {
    .control-icon {
      &:nth-child(4) {
        &:extend(.font-flair);
      }
    }
  }

  .chat-label {
    &:extend(.background-flair);
  }
}

.is-chatbar-reply {
  &:extend(.background-flair);
}

#chat-mobile-sidebar {
  .label {
    &:extend(.background-flair);
  }
}

//Alerts
.new-message-alert {
  &:extend(.background-flair);
}
.alert.UNREAD {
  &:extend(.background-flair);
}

//Friends
#friends-nav {
  .label {
    &:extend(.background-flair);
  }
}

#friends-list {
  .user-check-container {
    .label {
      &:extend(.background-flair);
    }
  }
}

//Group
.group-icon {
  &.unread {
    .label {
      &:extend(.background-flair);
    }
  }
}

// Server labels
#list-container {
  .unread {
    .label {
      &:extend(.background-flair);
    }
  }
}

.unread {
  .label {
    &:extend(.background-flair);
  }
}

//Info
.info {
  &--primary {
    &:extend(.background-flair-gradient);
  }
}
.info-toggle {
  &:extend(.font-flair);
}

//Reactions
.emoji-reactions {
  .emoji-reaction.emoji-reacted {
    &:extend(.background-flair-gradient);
    &:extend(.glow-flair);
  }
}

//Message
.is-message {
  .pinned-message {
    &:extend(.border-flair-small);

    .pinned-badge {
      &:extend(.background-flair);
    }
  }
}

//Quick profile
#quick-profile {
  .header {
    &:extend(.background-flair);
  }
}

// Inputs
.has-tooltip-primary {
  &:before {
    background: transparent;
    background: @semitransparent-dark-gradient !important;
    &:extend(.blur-less);
    font-family: @primary-font !important;
    color: @secondary-text !important;
    &:extend(.fourth-layer);
  }
}
input[type='checkbox'] {
  accent-color: @flair-color;
  &:extend(.font-primary);
}

.input {
  &:extend(.input-bg);
  &:extend(.font-primary);
  box-shadow: none !important;
  &:active,
  &:focus {
    background: @semitransparent-lightest-gradient !important;
  }
}
::placeholder {
  color: @text-muted !important;
}
.is-primary.input,
.is-dark.input {
  &:extend(.input-bg);
  &:extend(.font-primary);
  border: none;

  &:active,
  &:focus {
    border: none;
    outline: none;
  }
}

//Search Input
.search-query-highlight {
  &:extend(.background-flair);
  &:extend(.glow-flair);
}

.search-option-group {
  li {
    &:not(.active) {
      background: transparent !important;
    }
    &:hover:not(:first-child),
    &.active {
      &:extend(.background-flair);
      &:extend(.glow-flair);
    }
  }
}

.search-result-pagination li {
  &.active {
    a {
      &:extend(.background-flair);
    }
  }
}

.search-result {
  &-header {
    &:extend(.font-flair);
  }
  &-filters {
    .date-input {
      &:extend(.background-flair-gradient);
      &:extend(.glow-flair);
      &:extend(.border-flair-small);

      &::placeholder {
        &:extend(.font-secondary);
      }
    }
    .date-icon {
      &:extend(.font-secondary);
    }
    .add-more-filters {
      &:extend(.font-flair);
      &:hover {
        &:extend(.background-flair);
      }
      &:active {
        &:extend(.background-flair);
      }
    }
  }
}

//Icon
.icon,
.file-icon,
.file-type-icon {
  &:extend(.font-flair);
}
.badged-icon {
  &:extend(.font-flair);
}

// Typography
.title {
  &:extend(.font-primary);
}

.subtitle {
  &:extend(.font-muted);
}

.title.is-6 {
  margin-bottom: 0.25rem;
}

.is-6 {
  font-size: 11pt;
}

// Generic
#actions {
  &:hover {
    &:extend(.background-flair-gradient);
    &:extend(.glow-flair);
  }
}

#typing-badge-container {
  &:extend(.background-flair);
}

.mg-none {
  margin: 0 !important;
}

.mg-quarter {
  margin: 0.25rem 0 !important;
}

.mg-half {
  margin: @light-spacing 0 !important;
}

li.active {
  &:extend(.background-flair-gradient);
}

*:focus {
  outline: none;
}

*:active {
  outline: none;
}

code {
  &:extend(.background-semitransparent-lighter);
  &:extend(.font-flair);
}

strong {
  &:extend(.font-secondary);
}

.locked,
.disabled,
.disabled * {
  cursor: not-allowed !important;
}

@media only screen and (max-width: @mobile-breakpoint) {
  .dynamic-content {
    min-width: 100vw;
    background: transparent;
  }
}

.spin {
  animation-name: spin;
  animation-duration: 2000ms;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}

.bounce {
  animation-name: bounce;
  animation-duration: 2000ms;
  animation-iteration-count: infinite;
}

//------------- Navigation -------------

#mobile-nav {
  .active {
    &:extend(.font-flair);
  }
}

a.link {
  &:extend(.font-flair);

  &:hover {
    &:extend(.font-flair);
    &:extend(.glow-flair);
  }
}

.alpha-divider,
.search-option-heading,
.vc-weekday {
  &:extend(.font-flair);
}

.add-more-filters {
  &:hover {
    &:extend(.background-flair);
    &:extend(.font-primary);
  }
  &:extend(.font-flair);
}

li .is-active,
li.active {
  &:extend(.background-flair);
  &:extend(.glow-flair);
  border: none !important;
}

.user {
  .user-info {
    .subtitle {
      font-size: @micro-text-size;
      color: @text-muted;

      * {
        font-size: @micro-text-size;
        color: @text-muted;
      }
    }

    .bigmoji {
      .emoji {
        font-size: 18pt;
        animation-name: emoji-appear;
        animation-duration: 500ms;
      }
    }

    .spoiler-container {
      cursor: pointer;
      background-color: @gray;
      border-radius: @corner-rounding-smaller;
      .spoiler {
        opacity: 0;
      }

      .spoiler-open {
        cursor: text;
        background-color: @darker-transparent;
        opacity: 1;
      }
    }
  }
}
