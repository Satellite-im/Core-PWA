:root {
  --app-height: 100vh;
  --flair-color: @satellite-color;
  --flair-color-secondary: @satellite-color-secondary;
  --flair-color-rgb: @satellite-color-rgb;
}

@font-face {
  font-family: 'SpaceMono';
  font-style: normal;
  font-weight: 400;
  src: url('~assets/fonts/SpaceMono-Regular.ttf');
}
@font-face {
  font-family: 'SpaceMono';
  font-style: normal;
  font-weight: 700;
  src: url('~assets/fonts/SpaceMono-Bold.ttf');
}
@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 400;
  src: url('~assets/fonts/Poppins-Regular.ttf');
}
@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 700;
  src: url('~assets/fonts/Poppins-Bold.ttf');
}

body {
  padding: env(safe-area-inset-top) env(safe-area-inset-right)
    env(safe-area-inset-bottom) env(safe-area-inset-left) !important;
  font-family: @body-font;
  font-variant-ligatures: none;
  overscroll-behavior: contain;
  caret-color: @flair-color;
  background: @background;
  color: @body;
}

hr {
  background: @splash-radial;
  height: 1px;
  margin: @normal-spacing 0;
  border: none;
}

// remove later to be more accessible
*:focus,
*:active {
  outline: none;
}

// Scrollbars
* {
  &::-webkit-scrollbar {
    width: @scroll-bar-size;
    height: @scroll-bar-size;
  }
  &::-webkit-scrollbar-track {
    background: transparent;
  }
  &::-webkit-scrollbar-thumb {
    background-color: @flair-color;
    &:extend(.round-corners);
  }
  scrollbar-color: @flair-color transparent;
  scrollbar-width: thin;
}

// only show scroll on hover
.hover-scroll {
  &::-webkit-scrollbar-thumb {
    background-color: transparent;
  }
  scrollbar-color: transparent transparent;

  &:hover,
  &:focus-within {
    &::-webkit-scrollbar-thumb {
      background-color: @flair-color;
      &:extend(.round-corners);
      &:hover {
        background: @semitransparent-white-gradient;
        background-color: @flair-color;
      }
    }
    -ms-overflow-style: -ms-autohiding-scrollbar;
    scrollbar-color: @flair-color transparent;
  }
}

.hidden-scroll {
  -ms-overflow-style: none;
  scrollbar-width: none;
  &::-webkit-scrollbar {
    display: none;
  }
}

a {
  cursor: pointer;
}

code {
  &:extend(.background-semitransparent-lighter);
  &:extend(.font-flair);
}

strong {
  &:extend(.font-secondary);
}

a.link {
  &:extend(.font-flair);

  &:hover {
    &:extend(.font-flair);
    &:extend(.glow-flair);
  }
}

.is-secondary-background {
  background: @darker;
}

// ------------- Ui Elements-------------

//Cards
.card {
  background: black;
  .card-image {
    &:extend(.background-flair);
  }
  .card-text {
    .price {
      .btn-buy {
        &:extend(.background-flair-gradient);
        &:extend(.glow-flair);
      }
    }
  }
}

.glyph-card {
  .glyph-card-header {
    &:extend(.background-flair);
  }
  .card-text {
    .price {
      .btn-buy {
        &:extend(.background-flair-gradient);
        &:extend(.glow-flair);
      }
    }
  }
}

//Toast
.toasted-container.top-center {
  top: env(safe-area-inset-top) !important;
}

.toasted-container .toasted {
  background: @flair-gradient !important;
  color: @secondary-text !important;
  font-family: @primary-font;

  &.error {
    background: @danger-gradient !important;
  }
}

.loading-updating {
  &:extend(.background-flair);
}

//Menus
.is-collapsed .menu-toggle {
  &:extend(.font-flair);
}

.context-menu {
  p {
    &:hover {
      &:extend(.background-flair);
    }
  }
}

.simple-menu {
  .active {
    &:extend(.background-flair);

    &:hover {
      &:extend(.background-flair);
    }
  }
}

.version {
  &:extend(.font-muted);
}

// Buttons
button {
  padding: 0;
  border: none;
  cursor: pointer;
  background: transparent;
  display: flex;
  color: inherit;
}

::selection {
  &:extend(.font-secondary);
  &:extend(.background-flair);
}

/* Only for Safari to fix selection text background */

@media not all and (min-resolution: 0.001dpcm) {
  @supports (-webkit-appearance: none) {
    ::selection {
      background: rgba(var(--flair-color-rgb), 0.99) !important;
    }
  }
}

.vc-is-dark {
  .vc-weekday {
    &:extend(.font-flair);
  }
  .vc-highlight {
    &:extend(.background-flair-gradient);
    &:extend(.glow-flair);
  }
}

//Chip
.chip-item {
  &:extend(.background-flair);
  &:extend(.border-flair-small);
}

//Volume Slider
.volume-slider {
  .vue-slider-process {
    &:extend(.background-flair);
  }
  .vue-slider-dot-tooltip {
    .vue-slider-dot-tooltip-inner {
      font-family: @secondary-font;
      &:extend(.background-flair);
      &::after {
        border-top-color: @flair-color !important;
      }
    }
  }
}

//Switch
.switch-container {
  .switch-button-control {
    .switch-button {
      border: 0.125rem solid @flair-color;
      box-shadow: inset 0px 0px 2px 0px rgba(0, 0, 0, 0.33);

      .sw-button {
        &:extend(.background-flair);
        &:extend(.switch-off-glow-flair);
      }

      &.enabled {
        &:extend(.background-flair);
        &:extend(.glow-flair);

        .sw-button {
          border: 0.2rem solid @flair-color;
          background: @white !important;
        }
      }
    }
  }
}

//Media
#media-heading {
  .tag {
    &:extend(.background-flair);
    &:extend(.glow-flair);
    &:extend(.font-primary);
  }
}

#mediastream {
  .user,
  .media-user .tag {
    &:extend(.background-semitransparent-dark);
    &:extend(.font-primary);
    font-family: @primary-font;
  }
}

.user {
  .tag {
    &:extend(.background-flair);
  }
}

.media-user {
  &:extend(.background-flair);
}

.more-user {
  &:extend(.background-flair);
}

//Video
.plyr__control--overlaid {
  &:extend(.glow-flair);
  &:extend(.background-flair);
}

.plyr--full-ui input[type='range'] {
  &:extend(.font-flair);
}

//Tag
.tag {
  font-family: @secondary-font;
  &:extend(.background-flair-gradient);
  &:extend(.glow-flair);
  &:extend(.font-secondary);
  .tag-number {
    &:extend(.background-flair);
  }

  &:not(body).is-dark {
    .tag-number {
      &:extend(.background-flair);
    }
    background: @background;
  }
  &:not(body).is-primary {
    &:extend(.background-flair);
  }
}

.tag-inverted {
  &:extend(.font-secondary);
  background: @foreground;
}

.is-chatbar-reply {
  &:extend(.background-flair);
}

#chat-mobile-sidebar {
  .label {
    &:extend(.background-flair);
  }
}

//Alerts
.new-message-alert {
  &:extend(.background-flair);
}
.alert.UNREAD {
  &:extend(.background-flair);
}

.unread {
  .label {
    &:extend(.background-flair);
  }
}

//Info
.info {
  &--primary {
    &:extend(.background-flair-gradient);
  }
}
.info-toggle {
  &:extend(.font-flair);
}

//Quick profile
#quick-profile {
  .header {
    &:extend(.background-flair);
  }
  &:extend(.color-flair);
}

// ------------- Ui Elements-------------

.is-chatbar-reply {
  &:extend(.background-flair);
}

//Tooltip
.v-popper__popper {
  &.v-popper--theme-tooltip {
    .v-popper__inner {
      background: @semitransparent-dark-gradient;
      &:extend(.blur-less);
      font-family: @primary-font;
      color: @secondary-text;
      font-size: 0.75em;
    }

    .v-popper__arrow-outer {
      border-color: @midground;
    }
  }

  &.v-popper__popper--show-from .v-popper__wrapper {
    transform: scale(0.5);
  }

  &.v-popper__popper--show-to .v-popper__wrapper {
    transform: none;
    transition: transform 0.15s;
  }
}

//Search Input
.search-query-highlight {
  &:extend(.background-flair);
  &:extend(.glow-flair);
}

.search-option-group {
  li {
    &:not(.active) {
      background: transparent !important;
    }
    &:hover:not(:first-child),
    &.active {
      &:extend(.background-flair);
      &:extend(.glow-flair);
    }
  }
}

.search-result-pagination li {
  &.active {
    a {
      &:extend(.background-flair);
    }
  }
}

.search-result {
  &-header {
    &:extend(.font-flair);
  }
  &-filters {
    .date-input {
      &:extend(.background-flair-gradient);
      &:extend(.glow-flair);
      &:extend(.border-flair-small);
    }
    .date-icon {
      &:extend(.font-secondary);
    }
    .add-more-filters {
      &:extend(.font-flair);
      &:hover {
        &:extend(.background-flair);
      }
      &:active {
        &:extend(.background-flair);
      }
    }
  }
}

//Icon
.icon,
.file-icon,
.file-type-icon {
  &:extend(.font-flair);
}
.badged-icon {
  &:extend(.font-flair);

  .dynamic-icon {
    &:extend(.filter-glow-flair);
  }
}

// Typography
.title {
  &:extend(.font-primary);
}

.subtitle {
  &:extend(.font-muted);
}

#aside-box {
  #actions {
    &:hover {
      &:extend(.background-flair-gradient);
      &:extend(.glow-flair);
    }
  }
}

.locked,
.disabled,
.disabled * {
  cursor: not-allowed !important;
}

.spin {
  animation-name: spin;
  animation-duration: 2000ms;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}

.bounce {
  animation-name: bounce;
  animation-duration: 2000ms;
  animation-iteration-count: infinite;
}

//------------- Navigation -------------

#mobile-nav {
  div {
    .active {
      &:extend(.font-flair);
      svg {
        &:extend(.font-flair);
      }
    }
  }
}

.alpha-divider,
.search-option-heading,
.vc-weekday {
  &:extend(.font-flair);
}

.add-more-filters {
  &:hover {
    &:extend(.background-flair);
    &:extend(.font-primary);
  }
  &:extend(.font-flair);
}

.user {
  .user-info {
    .subtitle {
      font-size: @micro-text-size;
      color: @text-muted;

      * {
        font-size: @micro-text-size;
        color: @text-muted;
      }
    }

    .bigmoji {
      .emoji {
        font-size: 18pt;
        animation-name: emoji-appear;
        animation-duration: 500ms;
      }
    }
  }
}

.spoiler-container {
  cursor: pointer;
  background-color: @gray;
  border-radius: @corner-rounding-smaller;
  .spoiler {
    opacity: 0;
  }
  &.spoiler-open {
    cursor: text;
    background-color: transparent;
    .spoiler {
      opacity: 1;
    }
  }
}

.__nuxt-error-page {
  background: transparent;

  * {
    color: #ccc !important;
    fill: currentColor;
  }
}
