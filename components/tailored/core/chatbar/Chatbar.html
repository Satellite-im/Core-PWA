<div id="chatbar" ref="chatbar" :class="$store.state.ui.replyChatbarContent.id ? 'has-reply' : ''">
  <div
    :class="`chatbar-wrap ${charlimit ? 'is-error' : 'is-normal'}`"
    ref="wrap"
  >
    <div class="control-wrap file-upload-wrap">
      <FileUpload type="quick" />
    </div>
    <div
      :class="`chat-label ${isValidCommand ? 'green' : 'red'}`"
      v-if="hasCommand"
    >
      <font-awesome-icon :icon="['far', 'terminal']" />
    </div>
    <div contenteditable="true"
      :class="`messageuser hidden-scroll ${hasCommand ? 'has-command' : ''}`"
      ref="messageuser"
      @keydown="handleInputKeydown"></div>
    <!-- <textarea
      :placeholder="$t('global.talk')"
      rows="1"
      :class="`messageuser hidden-scroll ${hasCommand ? 'has-command' : ''}`"
      ref="messageuser"
      v-model="value"
      @input="handleInputChange"
      @change="handleInputChange"
      @keydown="handleInputKeydown"
    ></textarea> -->
    <div
      :data-tooltip="$t('global.glyphs')"
      v-on:click="toggleEnhancers"
      class="
        control-tooltip-wrap
        has-tooltip has-tooltip-top has-tooltip-primary
      "
    >
      <font-awesome-icon
        :icon="['far', 'grin-tongue-wink']"
        :class="`control-icon emoji-icon ${$store.state.ui.showEnhancers ? 'primary' : ''}`"
      />
    </div>
    <font-awesome-icon
      :icon="['far', 'arrow-circle-right']"
      class="control-icon"
      @click="sendMessage"
    />
  </div>
  <div id="bottom-bar-container">
    <UiTypingIndicator v-if="$store.state.ui.isTyping" :userName="$store.state.ui.isTyping.name"/>
    <span :class="`charlimit ${charlimit ? 'is-error' : 'is-normal'}`"
      >{{ `${text.length}/${maxChars}` }}</span
    >
  </div>
</div>
