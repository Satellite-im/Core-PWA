<div id="chatbar" ref="chatbar" :class="$store.state.ui.replyChatbarContent.id ? 'has-reply' : ''">
  <div :class="`chatbar-wrap ${charlimit ? 'is-error' : 'is-normal'}`" ref="wrap" >
    <div class="control-wrap file-upload-wrap">
      <FileUpload type="quick" ref="file-upload" />
    </div>
    <div
      :class="`chat-label ${isValidCommand ? 'green' : 'red'}`"
      v-if="hasCommand"
      ref="chatbar"
    >
      <terminal-icon size="1x" />
    </div>
    <div contenteditable="true" autocapitalize="off"
      :class="`messageuser hidden-scroll ${hasCommand ? 'has-command' : ''}`"
      ref="messageuser"
      :placeholder="$t('ui.talk')"
      @keydown="handleInputKeydown"
      @keyup="handleInputKeyup"
      @drop="handleDrop"
      @paste="handlePaste">
    </div>

    <TailoredCoreChatbarControls :sendMessage="sendMessage" id="chatbar-controls"/>
  </div>
  <TailoredCoreChatbarFooter :text="text" :charlimit="charlimit" :typing="recipientTyping" :usersTyping="activeFriend ? [ activeFriend ] : []" />
</div>
