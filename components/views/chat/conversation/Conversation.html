<div class="conversation" ref="container">
  <div class="messages" ref="messages">
    <UiBanner>
      <template #icon><key-icon size="1x" /></template>
      <template #header>{{$t('conversation.encrypted')}}</template>
    </UiBanner>
    <UiChatInfiniteScroll
      :isLoading="isLoadingMore"
      :noMore="noMore"
      @loadMore="loadMore"
    />
    <template v-for="(item, i) of chatItems">
      <TypographyHorizontalRuleText
        v-if="item.isNextDay"
        :value="item.message.at.toString()"
      />
      <UiCaretDivider v-if="item.isFirstUnreadMessage" text="New Messages" />
      <Message
        :key="item.message.id"
        :message="item.message"
        :showHeader="item.showHeader"
        :replies="item.replies"
      />
    </template>
    <div
      v-if="activeUploadChats.includes(conversation?.id)"
      class="loader-container"
    >
      <file-icon size="24" class="icon" />
      <div class="inner">
        <TypographyText> {{ $t('global.uploading') }} </TypographyText>
        <UiLoadersLoadingBar />
      </div>
    </div>
  </div>
</div>
