<UiContextMenu
  class="item"
  :class="{ 'is-loading': isLoading, selected: isSelected }"
  :items="contextMenuValues"
  data-cy="sidebar-user"
  @click="openConversation"
>
  <template>
    <UiUserState
      v-if="conversation.type === 'direct'"
      :user="user"
      :is-typing="isTyping"
    />
    <UiGroupIcon v-else :members="participants" />
  </template>
  <div class="user-info">
    <TypographyText
      class="ellipsis"
      color="light"
      font="heading"
      weight="bold"
      data-cy="sidebar-user-name"
    >
      {{ conversation.name }}
    </TypographyText>
    <TypographyText size="sm" data-cy="sidebar-user-name">
      <div
        ref="subtitle"
        class="ellipsis"
        :class="{ bigmoji: containsOnlyEmoji(lastMessageDisplay) }"
        v-html="wrapEmoji(markdownToHtml(lastMessageDisplay))"
      />
    </TypographyText>
  </div>
  <div class="user-chat-details">
    <TypographyText v-if="messages.length" color="dark" size="xs">
      {{ timestamp }}
    </TypographyText>
    <!-- <TypographyTag v-if="unreadMessageCount" :text="unreadMessageCount" /> -->
  </div>
  <div class="user-loader">
    <UiLoadersSpinner :spinning="isLoading" />
  </div>
</UiContextMenu>
