<div class="quick-profile" ref="quick" v-click-outside="close">
  <div class="top">
    <!-- <button @click="openProfile"> -->
    <UiUserState :user="user" :size="40" />
    <!-- </button> -->
    <div class="text-container">
      <TypographyText as="h4" class="ellipsis">
        {{ user.name }}
      </TypographyText>
      <TypographyText v-if="user?.status" color="dark" size="sm">
        {{user.status}}
      </TypographyText>
    </div>
    <InteractablesButton v-if="isMe" size="sm" @click="openSettings">
      <edit-icon size="1x" />
    </InteractablesButton>
  </div>
  <div class="status-container" v-if="quickProfile.showStatusChange">
    <button
      class="open-status-button"
      @mouseenter="setMenuVis(true)"
      @focus="setMenuVis(true)"
      v-click-outside="() => setMenuVis(false)"
    >
      <!-- <UiDynamicIcon :icon="status" /> -->
      {{ $t(`popups.status.${status}`) }}
      <chevron-right-icon size="1x" style="margin-left: auto" />
    </button>
    <UserStatusChange v-if="isStatusMenuVisible" @close="setMenuVis(false)" />
  </div>
  <InteractablesInput
    v-if="conversationId"
    v-model.trim="text"
    ref="input"
    size="xs"
    :placeholder="`${$t('friends.message')} ${user.name}...`"
    :maxLength="$Config.chat.maxChars"
    showLimit
    autofocus
    @submit="sendMessage"
  >
    <arrow-right-icon size="1x" />
  </InteractablesInput>
</div>
